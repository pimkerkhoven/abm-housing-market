import math

from model.constants import CONSTRUCTED_TOTALS
from model.util.injector import inject

FIXED_CONSTRUCT_50_000 = {2012: 50000, 2013: 50000, 2014: 50000, 2015: 50000, 2016: 0, 2017: 50000, 2018: 50000,
                          2019: 50000, 2020: 50000, 2021: 50000, 2022: 150000, 2023: 100000, 2024: 150000, 2025: 0,
                          2026: 0, 2027: 150000, 2028: 0, 2029: 100000, 2030: 0, 2031: 150000, 2032: 150000, 2033: 0,
                          2034: 0, 2035: 0, 2036: 0, 2037: 0, 2038: 50000, 2039: 100000, 2040: 100000, 2041: 0, 2042: 0,
                          2043: 50000, 2044: 0, 2045: 0, 2046: 0, 2047: 50000, 2048: 0, 2049: 0, 2050: 0, 2051: 50000,
                          2052: 50000, 2053: 0, 2054: 0, 2055: 150000, 2056: 0, 2057: 0, 2058: 0, 2059: 0}

FIXED_CONSTRUCT_12_500 = {
    2012: 12500,
    2013: 25000,
    2014: 12500,
    2015: 50000,
    2016: 25000,
    2017: 50000,
    2018: 37500,
    2019: 12500,
    2020: 100000,
    2021: 25000,
    2022: 75000,
    2023: 100000,
    2024: 62500,
    2025: 75000,
    2026: 50000,
    2027: 100000,
    2028: 75000,
    2029: 50000,
    2030: 50000,
    2031: 75000,
    2032: 62500,
    2033: 62500,
    2034: 62500,
    2035: 50000,
    2036: 75000,
    2037: 37500,
    2038: 37500,
    2039: 25000,
    2040: 37500,
    2041: 12500,
    2042: 12500,
    2043: 50000,
    2044: 25000,
    2045: 25000,
    2046: 12500,
    2047: 25000,
    2048: 50000,
    2049: 12500,
    2050: 12500,
    2051: 37500,
    2052: 12500,
    2053: 12500,
    2054: 25000,
    2055: 12500,
    2056: 25000,
    2057: 12500,
    2058: 25000,
    2059: 50000,
}



@inject("households", "year", "run_settings")
def construct_fixed_total(self, _households, year, run_settings):
    # if year in CONSTRUCTED_TOTALS:
    #     to_construct = math.floor(CONSTRUCTED_TOTALS[year] / run_settings.scale_factor)
    # else:
    to_construct = math.floor(FIXED_CONSTRUCT_12_500[year] / run_settings.scale_factor)

    for _ in range(to_construct):
        new_house = self.get_new_house()
        self.add(new_house)
        new_house.list()
